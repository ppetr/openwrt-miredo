diff -ur miredo-1.2.6.orig/libteredo/debug.h miredo-1.2.6/libteredo/debug.h
--- miredo-1.2.6.orig/libteredo/debug.h	2019-08-26 13:48:58.735783567 +0800
+++ miredo-1.2.6/libteredo/debug.h	2019-08-26 16:20:11.399019397 +0800
@@ -43,8 +43,6 @@
 #  ifdef __linux__
 #   include <errno.h>
 #   include <assert.h>
-#   undef PTHREAD_MUTEX_INITIALIZER
-#   define PTHREAD_MUTEX_INITIALIZER PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 
 static inline int
 d_pthread_mutex_init (pthread_mutex_t *mutex, pthread_mutexattr_t *pattr)
@@ -57,7 +55,7 @@
 		pthread_mutexattr_init (&attr);
 	}
 
-	pthread_mutexattr_settype (pattr, PTHREAD_MUTEX_ERRORCHECK_NP);
+	pthread_mutexattr_settype (pattr, PTHREAD_MUTEX_ERRORCHECK);
 	int res = pthread_mutex_init (mutex, pattr);
 
 	if (pattr == &attr)
